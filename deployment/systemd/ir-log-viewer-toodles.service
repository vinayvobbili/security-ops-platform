[Unit]
Description=Log Viewer - Toodles
After=network-online.target ir-toodles.service
Wants=network-online.target

[Service]
Type=simple
User=vinay
Group=vinay
WorkingDirectory=/home/vinay/pub/IR
EnvironmentFile=/home/vinay/pub/IR/.env

# Kill any orphan process using this port before starting
ExecStartPre=-/bin/bash -c 'fuser -k 8032/tcp 2>/dev/null || true'

# Start log viewer for Toodles bot
ExecStart=/home/vinay/pub/IR/.venv/bin/python deployment/log_viewer.py --port 8032 --title "Toodles Bot" --file /home/vinay/pub/IR/logs/toodles.log

Restart=on-failure
RestartSec=10

StandardOutput=journal
StandardError=journal
SyslogIdentifier=ir-log-viewer-toodles

[Install]
WantedBy=multi-user.target
