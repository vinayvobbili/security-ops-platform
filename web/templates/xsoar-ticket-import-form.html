<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSOAR Ticket Import</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/ticket_import.css">
</head>
<body>
<div class="top-nav">
    <div class="nav-burger" onclick="toggleMenu()">
        <img src="{{ url_for('static', filename='icons/burger.svg') }}" alt="Menu" class="nav-icon">
    </div>
    <div id="burgerMenu" class="burger-menu-content" style="display:none;">
        <a href="/">Home Dashboard</a>
        <a href="/xsoar">XSOAR Dashboard</a>
        <a href="/msoc-form">MSOC Form</a>
        <a href="/speak-up-form">Speak Up Form</a>
        <a href="/travel-form">Travel Form</a>
        <a href="/red-team-testing-form">Red Team Testing</a>
        <a href="/apt-other-names-search">APT Other Names Search</a>
    </div>
</div>
<div class="container">
    <div class="card">
        <div class="glossy-effect"></div>
        <div class="card-header">
            <h2 class="card-title">
                <span class="icon">ðŸ“¥</span>
                XSOAR Ticket Import
            </h2>
        </div>
        <div class="card-body">
            <form id="xsoarTicketImportForm" method="POST" action="/import-xsoar-ticket">
                <div class="form-group">
                    <label for="source_ticket_number">Source Ticket Number</label>
                    <input type="text" class="form-control" id="source_ticket_number" name="source_ticket_number" placeholder="Enter ticket number">
                </div>
                <button type="submit" class="btn btn-primary btn-block">Import Ticket</button>
            </form>

            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <p>Processing your request...</p>
            </div>
        </div>
    </div>

    <div id="response"></div>
</div>

<audio id="music" src="" loop muted></audio>
<div class="audio-controls">
    <button onclick="toggleAudio()">
        <img src="/static/icons/volume-xmark-solid.svg" alt="Unmute Icon" class="music-icon" id="music-icon">
    </button>
</div>
<script src="/static/js/common.js"></script>
<script src="/static/js/xsoar-ticket-import-form.js"></script>
<script>
    initRandomMusic();

    function toggleMenu() {
        var menu = document.getElementById('burgerMenu');
        menu.style.display = (menu.style.display === 'none' || menu.style.display === '') ? 'block' : 'none';
    }

    // Close menu when a link is clicked
    document.addEventListener('DOMContentLoaded', function () {
        var burgerMenu = document.getElementById('burgerMenu');
        if (burgerMenu) {
            burgerMenu.querySelectorAll('a').forEach(function (link) {
                link.addEventListener('click', function () {
                    burgerMenu.style.display = 'none';
                });
            });
        }
    });

    // Close burger menu when clicking outside
    document.addEventListener('click', function (e) {
        var burgerMenu = document.getElementById('burgerMenu');
        var navBurger = document.querySelector('.nav-burger');

        if (burgerMenu && !burgerMenu.contains(e.target) && !navBurger.contains(e.target)) {
            burgerMenu.style.display = 'none';
        }
    });
</script>
<script src="/static/js/ticket_import.js"></script>
</body>
</html>