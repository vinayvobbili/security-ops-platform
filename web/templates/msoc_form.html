<form id="msocForm" method="POST" action="/submit-msoc-form">
    <label for="name">Name:</label><br>
    <input type="text" id="name" name="name"><br><br>

    <label for="details">Details:</label><br>
    <input type="text" id="details" name="details"><br><br>

    <label for="severity">Severity:</label><br>
    <input type="number" id="severity" name="severity"><br><br>

    <label for="site">Site:</label><br>
    <input type="text" id="site" name="site"><br><br>

    <label for="comm_server">Comm Server:</label><br>
    <input type="text" id="comm_server" name="comm_server"><br><br>

    <label for="tech_onsite">Tech Onsite:</label><br>
    <input type="text" id="tech_onsite" name="tech_onsite"><br><br>
    <button type="submit">Submit</button>
</form>
<div id="response"></div>

<script>
    document.getElementById('msocForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent the default form submission

        const formData = new FormData(this);

        fetch('/submit-msoc-form', {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                // Update the response div with the new incident details
                document.getElementById('response').innerHTML = `
            <h1>Form submitted successfully!</h1>
            <p>XSOAR Ticket#: ${data.new_incident_id}</p>
            <p>XSOAR Ticket Link: <a href="${data.new_incident_link}">${data.new_incident_link}</a></p>
        `;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    });
</script>
