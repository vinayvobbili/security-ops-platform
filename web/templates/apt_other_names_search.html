<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>APT Other Names Search</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/apt_other_names_search.css">
</head>
<body>
<div class="top-nav">
    <div class="nav-burger" onclick="toggleMenu()">
        <img src="{{ url_for('static', filename='icons/burger.svg') }}" alt="Menu" class="nav-icon">
    </div>
    <div id="burgerMenu" class="burger-menu-content" style="display:none;">
        <a href="/">Home</a>
        <a href="/xsoar">XSOAR Dashboard</a>
        <a href="/security-analytics">üõ°Ô∏è Security Analytics</a>        <a href="/msoc-form">MSOC Form</a>
        <a href="/speak-up-form">Speak Up Form</a>
        <a href="/travel-form">Travel Notification Form</a>
        <a href="/red-team-testing-form">Red Team Testing</a>
        <a href="/xsoar-ticket-import-form">XSOAR Ticket Import</a>
    </div>
</div>
<audio id="music" src="" loop muted></audio>
<div class="audio-controls">
    <button onclick="toggleAudio()">
        <img src="/static/icons/volume-xmark-solid.svg" alt="Unmute Icon" class="music-icon" id="music-icon">
    </button>
</div>
<div class="container">
    <h1>APT Other Names Search</h1>
    <form id="searchForm" action="/api/apt-other-names" method="get">
        <label for="common_name">APT Common Name:</label>
        <div class="autocomplete-container">
            <input type="text" id="common_name" name="common_name" value="{{ common_name }}" required autocomplete="off" placeholder="Start typing to see suggestions...">
            <span class="dropdown-indicator">‚ñº</span>
            <div id="autocomplete-dropdown" class="autocomplete-dropdown"></div>
        </div>
        <div class="help-text">üí° Start typing any APT name to see autocomplete suggestions (e.g., "APT", "Lazarus", "28")</div>
        <div class="controls-row">
            <div class="metadata-slider-container">
                <span class="metadata-slider-label">Include Metadata?</span>
                <div class="slider-container">
                    <div class="metadata-slider-option active" data-value="no">No</div>
                    <div class="metadata-slider no" id="metadataSlider"></div>
                    <div class="metadata-slider-option" data-value="yes">Yes</div>
                </div>
                <input type="hidden" id="should_include_metadata" name="should_include_metadata" value="false">
            </div>
            <div class="response-format-container">
                <span class="response-format-label">Response Format:</span>
                <div class="slider-container">
                    <div class="slider-option active" data-value="html">HTML</div>
                    <div class="response-format-slider html" id="responseFormatSlider"></div>
                    <div class="slider-option" data-value="json">JSON</div>
                </div>
                <input type="hidden" id="response_format" name="response_format" value="html">
            </div>
            <div class="button-container">
                <button type="submit">Search</button>
                <div id="spinner" class="spinner" style="display:none;"></div>
            </div>
        </div>
    </form>
</div>
<script>
    // Make APT names data available globally for the search script
    window.aptNames = {{ apt_names | tojson }};
</script>
<script src="/static/js/common.js"></script>
<script src="/static/js/apt_other_names_search.js"></script>
<script>
    initRandomMusic();

    function toggleMenu() {
        var menu = document.getElementById('burgerMenu');
        menu.style.display = (menu.style.display === 'none' || menu.style.display === '') ? 'block' : 'none';
    }

    // Close menu when a link is clicked
    document.addEventListener('DOMContentLoaded', function () {
        var burgerMenu = document.getElementById('burgerMenu');
        if (burgerMenu) {
            burgerMenu.querySelectorAll('a').forEach(function (link) {
                link.addEventListener('click', function () {
                    burgerMenu.style.display = 'none';
                });
            });
        }
    });

    // Close burger menu when clicking outside
    document.addEventListener('click', function (e) {
        var burgerMenu = document.getElementById('burgerMenu');
        var navBurger = document.querySelector('.nav-burger');

        if (burgerMenu && !burgerMenu.contains(e.target) && !navBurger.contains(e.target)) {
            burgerMenu.style.display = 'none';
        }
    });
</script>
</body>
</html>
